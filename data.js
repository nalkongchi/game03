window.MAGE_DATA = (() => {
const SAVE_KEY='mageAcad_v7_2'; // 7.2 버전: 기본 접힘 상태 강제 적용
const IMG={leon:'leon.png',cassian:'cassian.png',saren:'saren.png',vain:'vain.png',elias:'elias.png',jaiden:'jaiden.png',oliver:'oliver.png',me:'me.png'};
const SOLO_ENDING={ttl:'솔로 엔딩 — 혼자여도 괜찮아',txt:'5년의 수련이 끝났지만, 이번엔 누구의 손도 잡지 않았다. 조금은 쓸쓸했지만 이상하게 후회는 없었다. 당신은 스스로의 힘으로 여기까지 왔고, 앞으로의 길도 충분히 걸어갈 수 있다. 누군가와 함께하는 미래는 아직 열려 있다. 다만, 이번 주인공은 오롯이 당신 자신이었다.'};

const NPCS=[
{id:'leon',icon:'🤴',name:'레온',title:'왕국의 왕자',desc:'빛나는 금발과 다정한 미소를 가진 왕자. 누구에게나 친절하지만, 당신 앞에서는 유독 더 가까이 다가온다.',meet:t=>t>=2,events:[{t:4,h:7,txt:'왕궁 복도에서 레온이 먼저 말을 걸어왔다. "오늘도 수련하러 가는 거지? 네 얼굴 보면 이상하게 기분이 좋아져."'},{t:12,h:8,txt:'저녁 정원에서 레온이 당신에게 꽃을 건넸다. "이건 네 눈이랑 잘 어울릴 것 같아서."',choices:['고맙다고 받는다','왜 나를 챙기냐고 묻는다','살짝 웃는다'],res:[{h:4,txt:'레온이 환하게 웃었다. "역시 웃는 얼굴이 제일 예뻐."'},{h:6,txt:'"그건… 네가 특별하니까?" 레온이 장난스럽게 말했지만 시선은 진지했다.'},{h:5,txt:'짧은 미소 하나에 레온의 귀가 빨갛게 달아올랐다.'}]},{t:22,h:10,txt:'연회 뒤편 발코니, 레온이 한숨을 쉬며 말했다. "다들 나를 왕자로만 보는데, 넌 다르게 봐주잖아."'},{t:32,h:12,txt:'레온이 성의 비밀 정원으로 당신을 불렀다. "이곳엔 아무도 못 들어와. 너만은 예외야."',choices:['조용히 곁에 선다','손을 먼저 내민다'],res:[{h:6,txt:'말 없이 나란히 선 순간, 레온은 당신의 어깨에 살짝 기대 왔다.'},{h:8,txt:'레온이 놀란 듯 굳었다가, 곧 손가락을 맞잡았다.'}]},{t:44,h:14,txt:'비가 오는 날, 레온은 망토 안으로 당신을 끌어당겼다. "감기 걸리면 곤란해. 네가 아프면… 내가 싫거든."'},{t:56,h:18,txt:'왕궁의 최고층. 레온이 낮게 속삭였다. "이제 더는 숨기기 싫어. 내가 원하는 건 왕좌보다 네 곁이야."'}]},
{id:'cassian',icon:'🗡️',name:'카시안',title:'왕실 근위기사',desc:'과묵하고 단단한 기사. 늘 한 걸음 뒤에서 지키지만, 당신이 위험하면 누구보다 먼저 움직인다.',meet:t=>t>=1,events:[{t:3,h:6,txt:'훈련장에서 넘어지자 카시안이 즉시 손을 내밀었다. "다치지 않았습니까?" 그의 목소리는 놀랄 만큼 다정했다.'},{t:10,h:7,txt:'야간 순찰 중 카시안이 당신의 발걸음을 맞춰 걸었다. "혼자 다니는 습관은 고치시는 게 좋습니다."',choices:['걱정해줘서 고맙다고 한다','왜 신경 쓰냐고 묻는다','앞으로 같이 걸어달라 한다'],res:[{h:4,txt:'카시안이 짧게 고개를 끄덕였다. 하지만 귀 끝이 붉었다.'},{h:6,txt:'"...제가 원해서입니다." 그 한마디 뒤로 침묵이 무거워졌다.'},{h:8,txt:'카시안이 시선을 피한 채 답했다. "원하신다면, 언제든."'}]},{t:20,h:9,txt:'임무 중 상처를 입은 카시안의 붕대를 감아주자, 그가 당신 손목을 잠깐 붙잡았다. "이 손, 떨고 있습니다."'},{t:30,h:12,txt:'폭풍우 치는 밤, 카시안은 문밖에 서 있었다. "혹시라도 불안하실까 봐…" 그는 끝내 말을 잇지 못했다.'},{t:42,h:14,txt:'훈련이 끝난 뒤, 카시안이 뒤에서 조용히 검을 잡아주며 자세를 바로잡았다. 서로의 숨이 닿을 만큼 가까웠다.'},{t:54,h:18,txt:'성벽 위 달빛 아래서 카시안이 고개를 숙였다. "기사의 맹세보다 앞선 감정이 생겨버렸습니다. 그것이… 당신입니다."'}]},
{id:'saren',icon:'🌊',name:'사렌',title:'이방인 상인',desc:'먼 나라에서 온 자유로운 상인. 능청스럽고 가벼워 보여도, 당신에게만은 자꾸 진심을 흘린다.',meet:t=>t>=4,events:[{t:6,h:5,txt:'시장 골목에서 사렌이 희귀한 마법 재료를 툭 던져줬다. "공짜야. 넌 그냥… 자꾸 눈이 가서."'},{t:14,h:8,txt:'사렌이 고향 바다 이야기를 들려주다 당신을 물끄러미 봤다. "너랑 있으면 이상하게 집 생각이 안 나."',choices:['더 이야기해달라고 한다','왜 그렇게 보는지 묻는다','시선을 피한다'],res:[{h:6,txt:'사렌은 웃으며 당신 쪽으로 더 가까이 몸을 기울였다.'},{h:5,txt:'"들켰네." 그는 답 대신 눈웃음으로 넘겼다.'},{h:3,txt:'사렌이 피식 웃었다. "도망가도 늦었어."'}]},{t:24,h:11,txt:'야시장의 불빛 아래, 사렌이 당신 소매를 붙잡았다. "잠깐만. 지금 다른 데 가지 마."'},{t:34,h:13,txt:'사렌이 옥상에서 별을 가리켰다. "우리 나라 말로 저 별은 그리움이야. 근데 지금은… 네 이름으로 부르고 싶네."'},{t:46,h:15,txt:'멀리 떠나야 하는 거래 전날, 사렌은 떠나는 대신 당신 곁에 앉아 있었다. "솔직히 말하면, 지금 떠나기 싫어."'},{t:58,h:18,txt:'새벽 항구. 사렌이 손을 내밀었다. "이번엔 장난 아니야. 같이 갈래? 네가 있으면 어디든 집이 될 것 같아."'}]},
{id:'vain',icon:'🌑',name:'베인',title:'금지된 마법사',desc:'추방된 천재 마도사. 서늘하고 위험하지만, 당신에게만은 설명할 수 없는 집착을 드러낸다.',meet:t=>t>=6,events:[{t:8,h:5,txt:'금지된 서고에서 베인과 마주쳤다. "또 너군." 차갑게 말했지만, 그는 당신을 쫓아내지 않았다.'},{t:16,h:7,txt:'베인이 금서의 일부를 보여주며 말했다. "이건 누구에게도 보여주지 않았어. 그런데 넌… 이상하게 괜찮군."',choices:['왜 나만 예외냐고 묻는다','조용히 읽는다','위험하지 않냐고 묻는다'],res:[{h:6,txt:'베인이 눈을 내리깔았다. "...네가 다치면 싫으니까."'},{h:8,txt:'베인은 흥미롭다는 듯 당신 옆에 가까이 앉았다.'},{h:5,txt:'"너랑 있으면 두렵지 않아." 베인의 시선이 흔들렸다.'}]},{t:26,h:11,txt:'금지된 마력의 반동으로 당신이 휘청이자 베인이 즉시 붙잡았다. "말했잖아. 내 앞에서 무모해지지 말라고."'},{t:36,h:13,txt:'깊은 밤, 베인은 당신 이름을 작게 부르며 손등에 입술을 스쳤다. "가끔은 확인하고 싶어. 네가 진짜 여기 있는지."'},{t:48,h:16,txt:'베인이 어둠 속에서 당신 어깨를 감쌌다. "세상이 다 등을 돌려도 상관없어. 네가 나를 버리지 않으면."'},{t:60,h:20,txt:'수련의 마지막 밤, 베인이 시선을 떼지 않은 채 속삭였다. "이제 선택해. 빛으로 갈지, 나와 함께 갈지."'}]},
{id:'elias',icon:'🌿',name:'엘리아스',title:'마을 약제사',desc:'부드럽고 따뜻한 약제사. 곁에 있으면 마음이 진정되는 사람, 그리고 언제나 가장 먼저 당신을 걱정하는 사람.',meet:t=>t>=1,events:[{t:2,h:5,txt:'약제사 가게에서 엘리아스가 미소 지으며 차를 건넸다. "오늘은 조금 지쳐 보이네요. 잠깐 쉬었다 가요."'},{t:9,h:7,txt:'피로 회복제를 건네며 엘리아스가 속삭였다. "당신이 무리하는 걸 보면… 자꾸 마음이 쓰여요."',choices:['고맙다고 받는다','괜찮다고 말한다','왜 그렇게 신경 쓰냐고 묻는다'],res:[{h:5,txt:'엘리아스가 안도한 듯 웃었다. "다행이다."'},{h:3,txt:'그는 약병을 슬며시 당신 손에 쥐여주었다. "그래도 가져가요."'},{h:7,txt:'엘리아스가 붉어진 얼굴로 시선을 내렸다. "그건… 당신이라서."'}]},{t:18,h:10,txt:'비 오는 날, 엘리아스가 우산을 들고 조용히 기다리고 있었다. "혹시 올 것 같아서."'},{t:28,h:12,txt:'함께 약을 만들다 손이 겹쳤다. 엘리아스는 놀라면서도 손을 빼지 않았다.'},{t:40,h:14,txt:'늦은 저녁, 엘리아스가 당신을 위해 허브차를 끓였다. "당신이 오는 시간대엔, 이상하게 매번 준비하게 돼요."'},{t:52,h:18,txt:'작은 약초원 한가운데서 엘리아스가 웃으며 말했다. "수련이 끝나도… 제 곁에 있어줄 수 있나요?"'}]},
{id:'jaiden',icon:'⚔️',name:'제이든',title:'라이벌 수련생',desc:'늘 툴툴거리지만 가장 많이 신경 쓰는 라이벌. 싸우고 부딪히며 점점 더 서로를 의식하게 된다.',meet:t=>t>=1,events:[{t:2,h:4,txt:'"흥, 그 정도 마법은 나도 해." 제이든은 틱틱댔지만, 끝내 당신의 실수는 먼저 고쳐줬다.'},{t:11,h:7,txt:'시험 도중 슬쩍 힌트를 주며 제이든이 중얼거렸다. "착각하지 마. 네가 너무 못하면 재미없으니까."',choices:['고맙다고 솔직히 말한다','같이 공부하자고 한다','도발로 받아친다'],res:[{h:4,txt:'제이든이 얼굴을 붉히며 고개를 홱 돌렸다.'},{h:7,txt:'"하? 누가 너랑..." 말은 그랬지만 다음 날 먼저 와 있었다.'},{h:5,txt:'말다툼 끝에 둘 다 웃어버렸다. 이상하게 기분이 좋았다.'}]},{t:21,h:10,txt:'축제 인파 속, 제이든이 당신 손목을 덥석 잡았다. "놓치면 귀찮잖아. 그냥 따라와."'},{t:33,h:12,txt:'결투 훈련 후 숨을 고르던 제이든이 낮게 말했다. "너랑 붙는 건… 다른 애들이랑 달라."'},{t:45,h:15,txt:'제이든은 당신이 다친 걸 보자 평소와 다르게 화를 냈다. "왜 이렇게 막 굴어? 네가 다치면… 내가 짜증나잖아."'},{t:57,h:18,txt:'해 질 무렵 옥상. 제이든이 시선을 피하며 중얼거렸다. "젠장… 이제 인정할게. 네가 없으면 재미없어. 너무."'}]},
{id:'oliver',icon:'🤝',name:'올리버',title:'절친한 친구',desc:'논리적이고 침착한 친구. 가장 오래 곁을 지켜본 만큼, 자신도 모르게 당신에게 마음이 깊어져 있다.',meet:t=>t>=1,events:[{t:3,h:4,txt:'"이 방법은 비효율적이야." 올리버는 차분히 설명하면서도 끝까지 당신 옆에 남아 도와줬다.'},{t:13,h:7,txt:'올리버가 조용히 노트를 내밀었다. "네가 쓰면 더 잘 맞을 것 같아서 정리해뒀어."',choices:['고맙다고 한다','이렇게까지 해주는 이유를 묻는다','같이 공부하자고 한다'],res:[{h:4,txt:'올리버가 헛기침했다. "당연한 일이야."'},{h:6,txt:'"...네가 중요하니까." 그는 말한 뒤 한참 눈을 마주치지 못했다.'},{h:7,txt:'그날 이후 둘의 공부 시간은 자연스럽게 늘어났다.'}]},{t:23,h:10,txt:'계획 없이 산책하자는 제안에 올리버가 잠시 멈췄다가 말했다. "...비효율적이지만, 너랑이면 괜찮아."'},{t:35,h:12,txt:'늦은 도서관, 졸린 눈으로 책을 읽던 당신에게 올리버가 자신의 어깨를 내어줬다. "잠깐만 기대도 돼."'},{t:47,h:15,txt:'올리버가 문득 말했다. "감정은 변수라고 생각했는데, 이상하게 너만큼은 계산이 안 돼."'},{t:59,h:18,txt:'수련 종료를 앞둔 밤, 올리버가 고개를 숙였다. "논리적으로 따지면… 난 이미 오래전부터 너를 좋아하고 있었어."'}]}
];

const MINI_ROMANCE={
leon:['레온이 멀리서 당신을 발견하자마자 곧장 다가왔다. "오늘은 꼭 네 얼굴 먼저 보고 싶었어."','짧게 스친 순간에도 레온의 시선은 오래 남았다. 그는 장난스럽게 웃었지만 눈빛은 다정했다.','레온이 당신 어깨 위 먼지를 가볍게 털어주며 말했다. "이 정도는 해도 되지?"'],
cassian:['카시안은 아무 말 없이 당신의 짐을 대신 들어주었다. 손끝이 스치는 순간 심장이 이상하게 빨라졌다.','복도 구석에서 카시안이 낮게 물었다. "오늘은 괜찮으십니까?" 그 짧은 한마디가 오래 남았다.','카시안은 당신이 보일 때마다 아주 미세하게 표정이 풀린다. 이제는 그걸 알아볼 수 있었다.'],
saren:['사렌이 웃으며 당신 곁에 기대왔다. "이상하지, 사람 많은데도 네 옆이 제일 편해."','사렌은 장난스레 말을 걸었지만, 마지막엔 꼭 진심 같은 눈으로 당신을 본다.','야시장 한복판, 사렌이 당신 소매 끝을 잠깐 잡았다 놓았다. 사소한 접촉이 더 신경 쓰였다.'],
vain:['베인은 지나가던 걸음을 멈추고 당신만 바라봤다. "또 무리했군." 냉담한 말인데도 어딘가 다정했다.','어둑한 서고에서 베인이 책 한 권을 밀어줬다. "읽어. 네가 좋아할 것 같았어."','베인은 언제나 말수가 적었지만, 당신 곁에 설 때만큼은 이상하리만치 오래 머물렀다.'],
elias:['엘리아스가 따뜻한 차를 건네며 미소 지었다. "오늘은 얼굴이 조금 피곤해 보여요."','약초 향이 스민 손끝이 잠깐 닿았다. 엘리아스는 놀라면서도 손을 거두지 않았다.','엘리아스는 당신이 들어올 시간을 아는 사람처럼, 늘 맞춰 준비되어 있었다.'],
jaiden:['제이든이 또 투덜거리며 말을 걸었지만, 결국 가장 먼저 당신 곁에 와 있었다.','훈련 중 제이든의 시선이 유난히 자주 마주쳤다. 그는 들키자마자 헛기침을 했다.','제이든은 당신 얘기만 나오면 괜히 예민해진다. 그 이유를 이제는 모르는 척하기 어렵다.'],
oliver:['올리버는 당신 몫까지 정리된 노트를 내밀었다. "겸사겸사였어." 하지만 그런 표정은 아니었다.','도서관 창가, 올리버는 책보다 당신 쪽을 더 자주 보고 있었다.','올리버는 짧은 침묵 속에서도 편안했다. 당신과 함께 있을 때만은 더욱 그랬다.']
};

const ACTS=[
{id:'apothecary_job',type:'job',unlock:1,icon:'🧪',name:'약방 보조',stat:{know:1},fat:10,gold:17,npc:'elias',nc:.30,fail:.05,fstat:{gold:-3},ftxt:'재고를 헷갈려 보수가 깎였다. -3G'},
{id:'market_delivery',type:'job',unlock:1,icon:'📦',name:'시장 배달',stat:{body:1},fat:14,gold:19,npc:'saren',nc:.24,fail:.09,fstat:{fat:8},ftxt:'짐이 많아져 추가 노동! 피로 +8'},
{id:'library_sorting',type:'job',unlock:1,icon:'🗂️',name:'서고 정리',stat:{know:1},fat:8,gold:15,npc:'oliver',nc:.26,fail:.04,fstat:{gold:-2},ftxt:'고서를 잘못 분류해 보수 -2G'},
{id:'alchemy_assist',type:'job',unlock:1,icon:'⚗️',name:'연금 조수',stat:{mana:1},fat:12,gold:18,npc:'vain',nc:.16,fail:.12,fstat:{gold:-4,mana:-1},ftxt:'연금 반응이 꼬였다. 보수 -4G, 마력 -1'},
{id:'wall_guard',type:'job',unlock:2,icon:'🛡️',name:'성벽 경비',stat:{body:1},fat:16,gold:20,npc:'cassian',nc:.28,fail:.09,fstat:{fat:10},ftxt:'경비가 길어졌다. 피로 +10'},
{id:'banquet_service',type:'job',unlock:2,icon:'🍷',name:'연회장 서빙',stat:{social:1},fat:12,gold:16,npc:'leon',nc:.32,fail:.07,fstat:{social:-1},ftxt:'작은 실수로 민망해졌다. 사교 -1'},
{id:'elemental_class',type:'class',unlock:1,icon:'✨',name:'기초 원소 마법',stat:{mana:2},fat:10,gold:-7,npc:'vain',nc:.16,fail:.08,fstat:{mana:-1},ftxt:'집중이 흔들렸다. 마력 -1'},
{id:'ancient_texts',type:'class',unlock:1,icon:'📚',name:'고대 문헌학',stat:{know:2},fat:8,gold:-7,npc:'oliver',nc:.20,fail:.05,fstat:{know:-1},ftxt:'해석 실수. 지식 -1'},
{id:'alchemy_practicum',type:'class',unlock:1,icon:'🔬',name:'연금술 실습',stat:{mana:1,know:1},fat:11,gold:-12,npc:'elias',nc:.16,fail:.10,fstat:{gold:-4},ftxt:'재료를 다시 구매했다. 추가 비용 -4G'},
{id:'martial_basics',type:'class',unlock:1,icon:'💪',name:'체술 기초',stat:{body:2},fat:14,gold:-5,npc:'cassian',nc:.20,fail:.10,fstat:{fat:7},ftxt:'훈련이 길어졌다. 피로 +7'},
{id:'court_etiquette',type:'class',unlock:2,icon:'👑',name:'궁정 예법',stat:{social:2},fat:8,gold:-9,npc:'leon',nc:.24,fail:.07,fstat:{social:-1},ftxt:'예법을 틀렸다. 사교 -1'},
{id:'forbidden_decoding',type:'class',unlock:3,icon:'🌑',name:'금서 해독',stat:{mana:2,know:1},fat:14,gold:-15,npc:'vain',nc:.32,fail:.14,fstat:{mana:-2,fat:10},ftxt:'금서의 반동을 받았다. 마력 -2, 피로 +10',forbidden:true},
{id:'royal_tea',type:'social',unlock:1,icon:'🫖',name:'왕궁 티파티',stat:{social:1},fat:8,gold:-13,npc:'leon',nc:.38,fail:.05,fstat:{social:-1},ftxt:'대화가 어색하게 꼬였다. 사교 -1'},
{id:'night_market',type:'social',unlock:1,icon:'🏮',name:'야시장 산책',stat:{social:1},fat:5,gold:-5,npc:'saren',nc:.36,fail:.05,fstat:{gold:-4},ftxt:'충동구매를 더 했다. -4G'},
{id:'herb_tea_circle',type:'social',unlock:1,icon:'🌿',name:'약초차 모임',stat:{social:1},fat:-8,gold:-6,npc:'elias',nc:.34,fail:.02,fstat:{},ftxt:'잔잔한 시간만 흘렀다.'},
{id:'knight_stands',type:'social',unlock:2,icon:'🏇',name:'기사단 관람',stat:{social:1,body:1},fat:7,gold:-7,npc:'cassian',nc:.30,fail:.05,fstat:{fat:4},ftxt:'오래 서 있어 피로 +4'},
{id:'festival',type:'social',unlock:2,icon:'🎉',name:'왕국 축제',stat:{social:2},fat:12,gold:-15,npc:'jaiden',nc:.28,fail:.08,fstat:{gold:-5},ftxt:'축제에서 돈을 더 써버렸다. -5G'},
{id:'secret_archive',type:'social',unlock:3,icon:'🕯️',name:'비밀 서고 탐방',stat:{know:1},fat:9,gold:-9,npc:'vain',nc:.38,fail:.10,fstat:{fat:7},ftxt:'수상한 기운 탓에 피로 +7',forbidden:true},
{id:'self_practice',type:'free',unlock:1,icon:'🔮',name:'자율 연습',stat:{mana:1},fat:8,gold:0,npc:null,nc:0,fail:.06,fstat:{mana:-1},ftxt:'마법식이 꼬였다. 마력 -1'},
{id:'note_review',type:'free',unlock:1,icon:'📝',name:'복습 정리',stat:{know:1},fat:6,gold:0,npc:null,nc:0,fail:.04,fstat:{},ftxt:'정리가 더뎠다.'},
{id:'walk',type:'free',unlock:1,icon:'🚶',name:'산책',stat:{social:1},fat:-8,gold:0,npc:'saren',nc:.14,fail:0,fstat:{},ftxt:''},
{id:'nap',type:'free',unlock:1,icon:'😴',name:'낮잠',stat:{},fat:-24,gold:0,npc:null,nc:0,fail:0,fstat:{},ftxt:''},
{id:'meditate',type:'free',unlock:2,icon:'🧘',name:'명상',stat:{mana:1},fat:-10,gold:0,npc:null,nc:0,fail:.02,fstat:{},ftxt:'잡념이 많았다.'}
];

const SHOP=[
{id:'pot',name:'🧪 피로 회복제',cost:36,eff:{fat:-35},desc:'피로 −35'},
{id:'book',name:'📖 마법 주석서',cost:54,eff:{know:3},desc:'지식 +3'},
{id:'crys',name:'💎 마력 수정',cost:68,eff:{mana:4},desc:'마력 +4'},
{id:'herb',name:'🌺 고급 약초',cost:46,eff:{body:3},desc:'체력 +3'},
{id:'chrm',name:'💌 행운 부적',cost:80,eff:{social:4},desc:'사교 +4'}
];

const RANDS=[
{ico:'⛈️',ttl:'폭풍우',txt:'폭풍우로 야간 수련이 완전히 꼬였다.',eff:{mana:-2,fat:8},tags:['마력 -2','피로 +8']},
{ico:'🌟',ttl:'마법 각성',txt:'수련 중 갑자기 마력이 솟구쳤다!',eff:{mana:3},tags:['마력 +3']},
{ico:'📜',ttl:'고서 발견',txt:'먼지 쌓인 서고에서 귀한 마법 고서를 발견했다.',eff:{know:3},tags:['지식 +3']},
{ico:'🐉',ttl:'드래곤 소동',txt:'왕국 외곽 소동으로 예정이 꼬였다.',eff:{fat:18},tags:['피로 +18']},
{ico:'🍀',ttl:'행운의 날',txt:'오늘은 이상하게 모든 게 잘 풀린다.',eff:{mana:1,know:1,body:1,social:1},tags:['전 스탯 +1']},
{ico:'💸',ttl:'세금 징수',txt:'예상치 못한 왕실 세금이 부과됐다.',eff:{gold:-22},tags:['골드 -22G']},
{ico:'🌸',ttl:'왕국 축제',txt:'잠시 수련을 잊고 축제를 즐겼다.',eff:{social:2,fat:-8},tags:['사교 +2','피로 -8']},
{ico:'🌡️',ttl:'병치레',txt:'몸 상태가 좋지 않아 회복에 시간을 썼다.',eff:{body:-2,fat:20,gold:-10},tags:['체력 -2','피로 +20','골드 -10G']},
{ico:'🎖️',ttl:'칭찬장',txt:'이번 달 성실함을 인정받아 포상금을 받았다.',eff:{gold:18,know:1},tags:['골드 +18G','지식 +1']}
];

const DATE_EVS={
leon:[{req:25,fat:10,h:8,txt:'레온과 왕궁 정원을 산책했다. 그는 걸음을 느리게 맞추며 당신만 바라봤다.',choices:['시선을 마주친다','고개를 살짝 숙인다'],res:[{h:5,txt:'레온이 작게 웃었다. "이렇게 마주 보는 거, 좋다."'},{h:4,txt:'레온은 더 가까이 다가와 목소리를 낮췄다. "부끄러운 거야?"'}]},{req:50,fat:12,h:11,txt:'레온이 비밀 정원으로 당신을 초대했다. 아무도 없는 곳에서 둘만의 시간이 흘렀다.',choices:['손을 먼저 잡는다','조용히 곁에 선다'],res:[{h:7,txt:'레온이 굳었다가 곧 손을 꼭 맞잡았다.'},{h:5,txt:'레온은 당신 어깨에 살짝 기대며 숨을 고르게 내쉬었다.'}]},{req:75,fat:14,h:14,txt:'왕궁의 야경 아래, 레온은 당신을 향한 감정을 숨기지 않았다. "더 가까워지고 싶어."'}],
cassian:[{req:25,fat:12,h:7,txt:'카시안이 개인 훈련을 봐주었다. 그의 손이 직접 자세를 고쳐주자 얼굴이 가까워졌다.',choices:['집중한다','일부러 못하는 척한다'],res:[{h:4,txt:'카시안이 만족스럽게 고개를 끄덕였다.'},{h:6,txt:'"...이렇게, 더 가까이." 카시안의 목소리가 낮아졌다.'}]},{req:50,fat:10,h:10,txt:'달빛 아래 성벽을 함께 걸었다. 침묵조차 편안했다.'},{req:75,fat:12,h:14,txt:'카시안은 더 이상 거리를 두지 않았다. "이제는 지키는 것만으로는 부족합니다."'}],
saren:[{req:25,fat:8,h:7,txt:'사렌이 이국적인 간식을 사주며 웃었다. "먹어봐. 네 표정 보는 게 재밌거든."',choices:['맛있다고 한다','너도 먹어보라고 건넨다'],res:[{h:4,txt:'사렌이 웃음 섞인 눈으로 당신을 바라봤다.'},{h:6,txt:'사렌이 당신 손가락 끝을 스치듯 받아 먹었다.'}]},{req:50,fat:9,h:11,txt:'사렌과 옥상에서 별을 봤다. 바람이 불 때마다 그의 어깨가 가볍게 닿았다.'},{req:75,fat:10,h:14,txt:'사렌이 당신 이마에 가볍게 입맞췄다. "미안, 참으려 했는데 잘 안 되네."'}],
vain:[{req:25,fat:10,h:8,txt:'베인이 금지된 책 일부를 당신에게만 허락했다. 가까이 앉은 채 낮은 목소리로 설명했다.',choices:['함께 읽는다','위험하지 않냐고 묻는다'],res:[{h:6,txt:'베인은 거의 붙어 앉다시피 한 채 페이지를 넘겼다.'},{h:7,txt:'"너랑 있으면 위험도 견딜 만해." 베인의 시선이 흔들렸다.'}]},{req:50,fat:12,h:11,txt:'베인은 자신의 비밀을 처음으로 털어놓았다. 그날 밤, 당신만이 그의 어둠을 알게 되었다.'},{req:75,fat:14,h:15,txt:'베인은 당신 손등을 붙잡고 속삭였다. "이젠 놓을 생각 없어. 네가 원치 않아도."'}],
elias:[{req:25,fat:7,h:7,txt:'엘리아스의 가게에서 함께 약을 만들었다. 손이 겹쳐도 그는 천천히 웃기만 했다.',choices:['계속 가르쳐달라 한다','손을 빼지 않는다'],res:[{h:4,txt:'엘리아스가 부드럽게 설명을 이어갔다.'},{h:6,txt:'엘리아스는 조용히 숨을 들이쉬며 미소 지었다.'}]},{req:50,fat:6,h:10,txt:'엘리아스와 따뜻한 차를 마시며 밤늦게까지 이야기를 나눴다. 이상하게 시간이 너무 빨랐다.'},{req:75,fat:6,h:14,txt:'엘리아스가 당신 이마에 살짝 손을 얹으며 말했다. "당신과 있는 시간이, 제일 편안해요."'}],
jaiden:[{req:25,fat:9,h:8,txt:'제이든이 투덜거리며 같이 식사하자고 했다. 결국 가장 좋은 자리도 당신 옆이었다.',choices:['고맙다고 한다','장난으로 놀린다'],res:[{h:4,txt:'제이든이 얼굴을 붉히며 젓가락질만 했다.'},{h:6,txt:'"하? 놀리지 마." 그러면서도 웃고 있었다.'}]},{req:50,fat:10,h:11,txt:'야간 훈련 후 단둘이 남았다. 제이든은 숨을 고르며 당신에게서 눈을 떼지 못했다.'},{req:75,fat:10,h:14,txt:'제이든은 결국 당신을 붙잡았다. "도망가지 마. 이제 와서 혼자 좋아한 나만 바보 되는 건 싫으니까."'}],
oliver:[{req:25,fat:7,h:7,txt:'올리버와 도서관 창가에 나란히 앉아 공부했다. 책보다 서로에게 더 신경 쓰이는 순간이 늘었다.',choices:['집중한다','조용히 웃는다'],res:[{h:4,txt:'올리버는 평소보다 더 가까이 노트를 밀어주었다.'},{h:6,txt:'올리버가 시선을 피하다가 작게 따라 웃었다.'}]},{req:50,fat:8,h:10,txt:'목적 없는 산책 중 올리버가 한참 침묵하다 말했다. "...너랑 있으면 계획이 틀어져도 괜찮아."'},{req:75,fat:8,h:14,txt:'올리버는 당신 손끝을 조심스럽게 잡았다. "이 감정은 비효율적이지만, 포기할 생각은 없어."'}]
};

// 31종 최신 엔딩 풀세트
const MAIN_ENDINGS = [
  { id:'burnout', ico:'🥀', ttl:'번아웃한 수련생', cond:s => s.burnout >= 3 || (s.fatigue >= 85 && s.freeCount < 10), txt:'당신은 누구보다 열심히 달렸지만, 끝내 자신을 돌보지 못했다. 손에 쥔 것은 많았지만 마음과 몸은 완전히 지쳐버렸다.' },
  { id:'debt', ico:'💸', ttl:'빚더미 수련생', cond:s => s.debt >= 5, txt:'수업과 사교를 쫓는 동안 지갑은 텅 비었고, 결국 빚쟁이들을 피해 아카데미를 야반도주해야 했다. 뼈아픈 경제적 교훈을 얻었다.' },
  { id:'legend', ico:'✨', ttl:'전설의 대마법사', cond:s => s.mana >= 65 && s.know >= 65 && s.body >= 42 && s.social >= 42 && s.scholarship >= 2, txt:'네 분야를 가리지 않고 빛난 당신은 세대에 한 번 나올까 말까 한 천재로 기록되었다. 수백 년이 지나도 그 이름은 전설로 남는다.' },
  { id:'forbidden', ico:'🌑', ttl:'금지된 마도의 계승자', cond:s => s.forbidden >= 6 && s.mana >= 50 && s.npc.vain >= 55, txt:'당신은 금지된 지식의 매력을 끝내 외면하지 않았다. 사람들은 두려워했지만, 당신은 누구보다 깊은 심연의 진실에 닿았다.' },
  { id:'fire_mage', ico:'🏖️', ttl:'조기 은퇴 마법사', cond:s => s.gold >= 350 && s.debt === 0, txt:'수련보다 자본의 복리 효과를 일찍 깨달았다. 마법 아이템 판매 수입을 철저히 분산 투자해 46세가 되기도 전에 완벽한 조기 은퇴(FIRE)를 달성하고 유유자적한 삶을 즐긴다.' },
  { id:'archmage', ico:'👑', ttl:'왕실 수석 마법사', cond:s => s.mana >= 60 && s.know >= 60, txt:'5년의 수련을 마친 당신은 왕국 역사상 가장 어린 수석 마법사로 임명되었다. 왕실은 당신의 이름을 가장 명예로운 공식 기록에 남겼다.' },
  { id:'battle', ico:'⚔️', ttl:'전투 마도사단 단장', cond:s => s.mana >= 55 && s.body >= 60, txt:'마법과 전투를 완벽히 겸비한 당신은 왕국 최정예 전투 마도사단의 지휘를 맡았다. 전장에서는 당신의 검광 하나가 승부를 갈랐다.' },
  { id:'professor', ico:'🎓', ttl:'아카데미 교수', cond:s => s.know >= 65 && s.classCount >= 26, txt:'당신은 아카데미에 남아 차세대 마법사들을 가르치게 되었다. 깐깐하지만 확실한 강의 덕분에 학생들은 당신의 수업을 듣기 위해 길게 줄을 섰다.' },
  { id:'diplomat', ico:'🕊️', ttl:'궁정 외교 마법사', cond:s => s.social >= 60 && s.know >= 50, txt:'마법만큼이나 말의 힘을 이해한 당신은 여러 왕국 사이를 오가며 외교를 이끌었다. 거대한 전쟁을 막아낸 것은 종종 당신의 우아한 찻자리 한 번이었다.' },
  { id:'alchemist', ico:'⚗️', ttl:'대연금술사', cond:s => s.know >= 55 && s.mana >= 50 && s.alchemyCount >= 12, txt:'연금술에 깊이 몰두한 당신은 아무도 상상하지 못한 새로운 조합법을 잇달아 만들어냈다. 귀족과 상인들이 당신의 공방 앞에 금화를 들고 대기한다.' },
  { id:'merchant', ico:'💰', ttl:'자수성가한 마법 상인', cond:s => s.gold >= 260 && s.jobCount >= 26 && s.social >= 40, txt:'아르바이트와 거래를 발판 삼아 자신만의 거대한 상단을 만들었다. 마법사이자 타고난 사업가로서, 당신의 샵은 곧 왕국 최고의 핫플레이스가 되었다.' },
  { id:'summoner', ico:'🧚', ttl:'정령 소환사', cond:s => s.mana >= 55 && s.social >= 50, txt:'사람뿐만 아니라 정령과도 능숙하게 교감한 당신. 거대한 자연의 힘을 자유자재로 다루며 가장 위대한 정령 소환사로 거듭났다.' },
  { id:'minister', ico:'🏛️', ttl:'마법부 장관', cond:s => s.social >= 65 && s.mana >= 40, txt:'압도적인 인맥과 정치력으로 마법사 사회의 정점에 올랐다. 실무 마법보다 행정과 권력을 다루는 데 천부적인 재능을 꽃피웠다.' },
  { id:'illusionist', ico:'🎨', ttl:'환영 예술가', cond:s => s.mana >= 50 && s.social >= 50 && (s.counts?.byAct?.self_practice >= 10), txt:'빈 캔버스에 그림을 그리듯 허공에 환상적인 마법의 풍경을 생생하게 구현해냈다. 당신의 혁신적인 환영 작품들은 귀족들 사이에서 엄청난 유행이 되었다.' },
  { id:'botanist', ico:'🌱', ttl:'마법 생태학자', cond:s => s.know >= 45 && s.body >= 45 && (s.counts?.byAct?.herb_tea_circle >= 10), txt:'마법으로 치명적인 병해충을 방제하고, 원원종 99.0%의 완벽한 순도를 자랑하는 마법 종자를 개량하는 데 성공했다. 당신은 왕국 농업의 판도를 바꾼 전설이 되었다.' },
  { id:'royal_tutor', ico:'🧐', ttl:'왕실 가정교사', cond:s => s.know >= 55 && s.social >= 55, txt:'전투보다는 지식을 부드럽게 전달하고 귀족들과 교류하는 능력을 인정받아, 콧대 높은 왕족들의 전담 스승으로 초빙되었다.' },
  { id:'muscle_wizard', ico:'🏋️', ttl:'근육 마법사', cond:s => s.body >= 70 && s.mana <= 25, txt:'"마력이 부족하다면 물리력으로 해결한다!" 당신은 아카데미 역사상 전무후무한 완력을 자랑하며 지팡이 대신 맨손으로 오크를 때려잡는 근육 마법사로 졸업했다.' },
  { id:'healer', ico:'🩹', ttl:'신성 치유사', cond:s => s.know >= 50 && s.body >= 50 && (s.counts?.byAct?.apothecary_job >= 15), txt:'전장이 아닌 병동에서 마법으로 사람을 살리는 길을 택했다. 당신의 헌신적인 치유 마법은 수많은 생명을 구하며 성녀(성자)로 추앙받게 만들었다.' },
  { id:'job_apothecary', ico:'🌿', ttl:'마을의 명의', cond:s => (s.counts?.byAct?.apothecary_job >= 15) && s.know >= 40, txt:'마법 수련보다 약초와 처방에 더 깊은 재능을 보였다. 엘리아스의 약방을 물려받아 마을 사람들의 건강을 다정하게 책임지는 명의가 되었다.' },
  { id:'job_delivery', ico:'📦', ttl:'마법 물류왕', cond:s => (s.counts?.byAct?.market_delivery >= 15) && s.body >= 40, txt:'골목을 누비던 배달 솜씨에 공간 이동 마법을 결합했다. 당신은 왕국 전체의 유통망을 꽉 잡은 대륙 최고의 거대 물류 길드장이 되었다.' },
  { id:'job_library', ico:'📚', ttl:'대도서관 관장', cond:s => (s.counts?.byAct?.library_sorting >= 15) && s.know >= 45, txt:'먼지 쌓인 고서들과 가장 많은 시간을 보낸 당신. 아카데미의 서고를 넘어 왕립 대도서관의 모든 책을 관리하는 총괄 관장이 되었다.' },
  { id:'job_alchemy', ico:'🔬', ttl:'수석 연금 연구원', cond:s => (s.counts?.byAct?.alchemy_assist >= 15) && s.mana >= 40, txt:'매번 폭발하는 연금 솥을 꿋꿋이 수습하던 당신은 어느새 연금술의 달인이 되어, 왕립 공방을 이끄는 수석 연구원으로 발탁되었다.' },
  { id:'job_guard', ico:'🛡️', ttl:'성벽 수비대장', cond:s => (s.counts?.byAct?.wall_guard >= 15) && s.body >= 45, txt:'수련보다 성벽 위에서 밤바람을 맞은 날이 더 많았다. 그 묵묵한 성실함과 체력을 인정받아 수도의 외곽 방어를 총괄하는 수비대장이 되었다.' },
  { id:'job_banquet', ico:'🍷', ttl:'왕실 수석 시종장', cond:s => (s.counts?.byAct?.banquet_service >= 15) && s.social >= 45, txt:'수많은 귀족들 사이에서 완벽한 눈치와 예법을 마스터했다. 마법사로서의 길 대신 왕실의 모든 대소사를 매끄럽게 총괄하는 수석 시종장이 되었다.' },
  { id:'dark_merchant', ico:'🃏', ttl:'어둠의 마도 상인', cond:s => s.forbidden >= 4 && s.gold >= 200, txt:'합법적인 상단 대신 왕국의 그늘을 택했다. 뒷골목에서 위험하고 진귀한 금지된 마법 물품들을 은밀하게 밀매하며 거물로 성장했다.' },
  { id:'mercenary', ico:'⛺', ttl:'떠돌이 마법 용병', cond:s => s.body >= 55 && s.gold <= 50, txt:'실력은 출중하지만 모아둔 돈이 없어 전장을 떠돌게 되었다. 거친 용병단에 합류해 하루하루 의뢰를 해결하며 자유롭고도 위태로운 삶을 산다.' },
  { id:'wanderer', ico:'🗺️', ttl:'자유로운 방랑자', cond:s => s.freeCount >= 25 && s.debt === 0, txt:'명예나 돈에 얽매이지 않고 발길 닿는 대로 유랑하는 길을 택했다. 새로운 마을에 닿을 때마다 고향에 안부 엽서를 띄우며 세상을 유유자적 탐험한다.' },
  { id:'social_butterfly', ico:'🎉', ttl:'아카데미 파티광', cond:s => s.social >= 70 && s.know <= 30, txt:'공부는 뒷전이고 5년 내내 축제와 다과회만 쫓아다녔다. 매일 밤을 론네펠트 홍차와 동파육이 끊이지 않는 연회로 채운 끝에, 마법 실력은 바닥이지만 인맥 하나는 왕국 최고인 셀럽이 되었다.' },
  { id:'slacker', ico:'🛌', ttl:'게으른 백수', cond:s => (s.counts?.byAct?.nap >= 20) && (s.mana + s.know + s.body + s.social) <= 100, txt:'아카데미에 침대를 하나 더 둔 것처럼 잠만 잤다. 결국 치열한 마법사의 길을 포기하고 따뜻한 고향으로 돌아가 한없이 늘어지는 일상을 택했다.' },
  { id:'normal', ico:'📘', ttl:'무난한 졸업생', cond:s => (s.mana + s.know + s.body + s.social) >= 110, txt:'눈부신 전설은 아니더라도, 당신은 끈기 있게 5년의 수련을 완주했다. 이제 아카데미를 떠나 한 명의 어엿한 마법사로서 진짜 삶을 시작한다.' },
  { id:'bad', ico:'💀', ttl:'유급 수련생', cond:() => true, txt:'5년이 지났지만 정식 마법사가 되기엔 실력이 조금 부족했다. 하지만 완전히 끝난 것은 아니다. 다시 시작한다면 이번엔 더 멀리 갈 수 있을 것이다.' }
];

const ROMANCE_ENDINGS=[
{id:'vain',ico:'🌑',ttl:'베인 — 어둠 속 유일한 빛',cond:s=>s.npc.vain>=60&&s.mana>=24&&s.forbidden>=1,txt:'세상은 베인을 경계했지만, 그는 당신 앞에서만 조용히 무너졌다. 금지된 밤들 속에서도 당신만은 그의 유일한 빛이었다.'},
{id:'leon',ico:'💍',ttl:'레온 — 왕궁의 동반자',cond:s=>s.npc.leon>=60&&s.social>=20,txt:'레온은 수많은 시선 앞에서도 망설이지 않았다. 왕궁의 정원에서 그는 당신의 손을 잡고, 평생 함께하자고 말했다.'},
{id:'cassian',ico:'🗡️',ttl:'카시안 — 기사의 맹세',cond:s=>s.npc.cassian>=60&&s.body>=20,txt:'카시안은 더 이상 임무라는 말 뒤에 숨지 않았다. 당신 곁을 지키는 것이 자신의 진짜 소원이라고, 그가 낮게 고백했다.'},
{id:'saren',ico:'🌊',ttl:'사렌 — 미지의 땅으로',cond:s=>s.npc.saren>=58&&s.social>=16,txt:'사렌은 마지막까지 장난스럽게 웃었지만, 떠나는 순간엔 누구보다 진지했다. 당신은 그의 손을 잡고 낯선 바다 너머로 향했다.'},
{id:'elias',ico:'🌿',ttl:'엘리아스 — 약초원의 평화',cond:s=>s.npc.elias>=58,txt:'엘리아스와 함께하는 삶은 화려하진 않아도 따뜻했다. 작은 약초원과 차 향기, 그리고 서로를 기다리는 저녁이 매일을 채웠다.'},
{id:'jaiden',ico:'⚔️',ttl:'제이든 — 영원한 라이벌',cond:s=>s.npc.jaiden>=60&&s.body>=18,txt:'서로를 밀어붙이며 성장하던 두 사람은 결국 가장 가까운 사람이 되었다. 투덜거리면서도, 그는 언제나 가장 먼저 당신을 찾았다.'},
{id:'oliver',ico:'🤝',ttl:'올리버 — 현자의 동반자',cond:s=>s.npc.oliver>=58&&s.know>=20,txt:'올리버는 끝내 감정을 공식처럼 설명하지 못했다. 하지만 당신과 함께 있을 때만큼은, 그 침묵 자체가 가장 분명한 대답이었다.'}
];

return {
  SAVE_KEY,
  IMG,
  SOLO_ENDING,
  NPCS,
  MINI_ROMANCE,
  ACTS,
  SHOP,
  RANDS,
  DATE_EVS,
  MAIN_ENDINGS,
  ROMANCE_ENDINGS
};
})();
